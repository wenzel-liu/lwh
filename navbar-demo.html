<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>响应式导航栏演示</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/framer-motion@10/dist/framer-motion.umd.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    backdropBlur: {
                        '8': '8px',
                    },
                }
            }
        }
    </script>
    <style>
        .backdrop-blur-8 {
            backdrop-filter: blur(8px);
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;
        const { motion, useScroll, useTransform } = FramerMotion;

        // Navbar 组件
        const Navbar = ({ className = '' }) => {
            const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);
            const [scrollY, setScrollY] = useState(0);
            
            // 手动实现滚动监听
            useEffect(() => {
                const handleScroll = () => {
                    setScrollY(window.scrollY);
                };
                
                window.addEventListener('scroll', handleScroll);
                return () => window.removeEventListener('scroll', handleScroll);
            }, []);
            
            // 计算导航栏位移
            const getNavbarY = (scroll) => {
                if (scroll <= 200) return 0;
                if (scroll >= 300) return -100;
                return -((scroll - 200) / 100) * 100;
            };
            
            // 计算背景透明度
            const getBackgroundOpacity = (scroll) => {
                if (scroll <= 0) return 0.6;
                if (scroll <= 50) return 0.6 + (scroll / 50) * 0.2;
                if (scroll <= 200) return 0.8 + ((scroll - 50) / 150) * 0.1;
                return 0.9;
            };

            const navbarY = getNavbarY(scrollY);
            const backgroundOpacity = getBackgroundOpacity(scrollY);

            const menuItems = [
                { label: '首页', href: '#home' },
                { label: '关于', href: '#about' },
                { label: '项目', href: '#projects' },
                { label: '联系', href: '#contact' }
            ];

            const toggleMobileMenu = () => {
                setIsMobileMenuOpen(!isMobileMenuOpen);
            };

            return (
                <motion.nav
                    className={`fixed top-0 left-0 right-0 z-50 transition-all duration-300 ${className}`}
                    style={{
                        transform: `translateY(${navbarY}%)`,
                        backgroundColor: `rgba(255, 255, 255, ${backgroundOpacity})`,
                    }}
                    initial={{ y: 0 }}
                >
                    {/* 背景模糊效果 */}
                    <div className="absolute inset-0 backdrop-blur-8 bg-white/60" />
                    
                    {/* 导航内容 */}
                    <div className="relative px-4 sm:px-6 lg:px-8">
                        <div className="flex items-center justify-between h-16">
                            {/* Logo */}
                            <motion.div
                                className="flex-shrink-0"
                                whileHover={{ scale: 1.05 }}
                                whileTap={{ scale: 0.95 }}
                            >
                                <a href="#home" className="text-xl font-bold text-gray-900">
                                    MyPage
                                </a>
                            </motion.div>

                            {/* 桌面端菜单 */}
                            <div className="hidden sm:block">
                                <div className="ml-10 flex items-baseline space-x-4">
                                    {menuItems.map((item, index) => (
                                        <motion.a
                                            key={item.label}
                                            href={item.href}
                                            className="text-gray-700 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200"
                                            whileHover={{ scale: 1.05 }}
                                            whileTap={{ scale: 0.95 }}
                                            initial={{ opacity: 0, y: -20 }}
                                            animate={{ opacity: 1, y: 0 }}
                                            transition={{ delay: index * 0.1 }}
                                        >
                                            {item.label}
                                        </motion.a>
                                    ))}
                                </div>
                            </div>

                            {/* 移动端汉堡菜单按钮 */}
                            <div className="flex sm:hidden">
                                <motion.button
                                    onClick={toggleMobileMenu}
                                    className="inline-flex items-center justify-center p-2 rounded-md text-gray-700 hover:text-gray-900 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500"
                                    whileTap={{ scale: 0.95 }}
                                >
                                    <span className="sr-only">打开主菜单</span>
                                    {/* 汉堡菜单图标 */}
                                    <div className="relative h-6 w-6">
                                        <span
                                            className={`absolute h-0.5 w-6 bg-current transform transition-all duration-300 ${
                                                isMobileMenuOpen ? 'rotate-45 translate-y-2' : ''
                                            }`}
                                            style={{ top: '6px' }}
                                        />
                                        <span
                                            className={`absolute h-0.5 w-6 bg-current transform transition-all duration-300 ${
                                                isMobileMenuOpen ? 'opacity-0' : 'opacity-100'
                                            }`}
                                            style={{ top: '12px' }}
                                        />
                                        <span
                                            className={`absolute h-0.5 w-6 bg-current transform transition-all duration-300 ${
                                                isMobileMenuOpen ? '-rotate-45 -translate-y-2' : ''
                                            }`}
                                            style={{ top: '18px' }}
                                        />
                                    </div>
                                </motion.button>
                            </div>
                        </div>

                        {/* 移动端菜单 */}
                        <motion.div
                            className="sm:hidden overflow-hidden"
                            initial="closed"
                            animate={isMobileMenuOpen ? "open" : "closed"}
                            variants={{
                                open: {
                                    opacity: 1,
                                    height: "auto",
                                    transition: {
                                        duration: 0.3,
                                        ease: "easeInOut"
                                    }
                                },
                                closed: {
                                    opacity: 0,
                                    height: 0,
                                    transition: {
                                        duration: 0.3,
                                        ease: "easeInOut"
                                    }
                                }
                            }}
                        >
                            <div className="px-2 pt-2 pb-3 space-y-1 bg-white/80 backdrop-blur-sm rounded-b-lg">
                                {menuItems.map((item, index) => (
                                    <motion.a
                                        key={item.label}
                                        href={item.href}
                                        className="text-gray-700 hover:text-gray-900 block px-3 py-2 rounded-md text-base font-medium transition-colors duration-200"
                                        onClick={() => setIsMobileMenuOpen(false)}
                                        initial={{ opacity: 0, x: -20 }}
                                        animate={{ 
                                            opacity: isMobileMenuOpen ? 1 : 0, 
                                            x: isMobileMenuOpen ? 0 : -20 
                                        }}
                                        transition={{ delay: index * 0.1 }}
                                        whileTap={{ scale: 0.95 }}
                                    >
                                        {item.label}
                                    </motion.a>
                                ))}
                            </div>
                        </motion.div>
                    </div>
                </motion.nav>
            );
        };

        // MainContent 组件
        const MainContent = () => {
            const sections = [
                {
                    id: 'home',
                    title: '欢迎来到我的页面',
                    content: '这是一个展示响应式导航栏滚动效果的演示页面。当你向下滚动时，你会看到导航栏的动画效果。',
                    bgColor: 'bg-gradient-to-br from-blue-50 to-indigo-100'
                },
                {
                    id: 'about',
                    title: '关于我们',
                    content: '继续滚动可以看到导航栏在0-200px时保持固定，在200-300px时开始向上滑出视口。',
                    bgColor: 'bg-gradient-to-br from-green-50 to-emerald-100'
                },
                {
                    id: 'projects',
                    title: '我的项目',
                    content: '这个导航栏使用了Framer Motion的动画效果，实现平滑的过渡。',
                    bgColor: 'bg-gradient-to-br from-purple-50 to-violet-100'
                },
                {
                    id: 'contact',
                    title: '联系我们',
                    content: '导航栏具有backdrop-filter模糊效果和半透明背景，在移动端会显示汉堡菜单。',
                    bgColor: 'bg-gradient-to-br from-orange-50 to-red-100'
                }
            ];

            // 创建更多内容以便测试滚动
            const additionalContent = Array.from({ length: 10 }, (_, i) => ({
                title: `附加内容区域 ${i + 1}`,
                content: `这是第 ${i + 1} 个内容区域。继续滚动以测试导航栏的交互效果。当滚动超过300px时，导航栏会完全隐藏。`,
                bgColor: i % 2 === 0 ? 'bg-gray-50' : 'bg-white'
            }));

            return (
                <main className="pt-16">
                    {/* Hero Section */}
                    <section className="min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-600 to-purple-700 text-white">
                        <motion.div
                            className="text-center px-4"
                            initial={{ opacity: 0, y: 50 }}
                            animate={{ opacity: 1, y: 0 }}
                            transition={{ duration: 0.8 }}
                        >
                            <motion.h1
                                className="text-4xl md:text-6xl font-bold mb-6"
                                initial={{ opacity: 0, y: 30 }}
                                animate={{ opacity: 1, y: 0 }}
                                transition={{ delay: 0.2, duration: 0.8 }}
                            >
                                响应式导航栏演示
                            </motion.h1>
                            <motion.p
                                className="text-xl md:text-2xl mb-8 max-w-2xl mx-auto"
                                initial={{ opacity: 0, y: 30 }}
                                animate={{ opacity: 1, y: 0 }}
                                transition={{ delay: 0.4, duration: 0.8 }}
                            >
                                向下滚动体验导航栏的动画效果
                            </motion.p>
                            <motion.div
                                className="animate-bounce"
                                initial={{ opacity: 0 }}
                                animate={{ opacity: 1 }}
                                transition={{ delay: 0.8, duration: 0.6 }}
                            >
                                <svg
                                    className="w-6 h-6 mx-auto"
                                    fill="none"
                                    stroke="currentColor"
                                    viewBox="0 0 24 24"
                                    xmlns="http://www.w3.org/2000/svg"
                                >
                                    <path
                                        strokeLinecap="round"
                                        strokeLinejoin="round"
                                        strokeWidth={2}
                                        d="M19 14l-7 7m0 0l-7-7m7 7V3"
                                    />
                                </svg>
                            </motion.div>
                        </motion.div>
                    </section>

                    {/* Main Sections */}
                    {sections.map((section, index) => (
                        <motion.section
                            key={section.id}
                            id={section.id}
                            className={`min-h-screen flex items-center justify-center ${section.bgColor}`}
                            initial={{ opacity: 0, y: 50 }}
                            whileInView={{ opacity: 1, y: 0 }}
                            transition={{ duration: 0.6, delay: index * 0.1 }}
                            viewport={{ once: true, margin: "-100px" }}
                        >
                            <div className="text-center px-4 max-w-4xl mx-auto">
                                <motion.h2
                                    className="text-3xl md:text-4xl font-bold mb-6 text-gray-800"
                                    initial={{ opacity: 0, y: 30 }}
                                    whileInView={{ opacity: 1, y: 0 }}
                                    transition={{ delay: 0.2, duration: 0.6 }}
                                    viewport={{ once: true }}
                                >
                                    {section.title}
                                </motion.h2>
                                <motion.p
                                    className="text-lg md:text-xl text-gray-600 leading-relaxed"
                                    initial={{ opacity: 0, y: 30 }}
                                    whileInView={{ opacity: 1, y: 0 }}
                                    transition={{ delay: 0.4, duration: 0.6 }}
                                    viewport={{ once: true }}
                                >
                                    {section.content}
                                </motion.p>
                                <motion.div
                                    className="mt-8 text-sm text-gray-500"
                                    initial={{ opacity: 0 }}
                                    whileInView={{ opacity: 1 }}
                                    transition={{ delay: 0.6, duration: 0.6 }}
                                    viewport={{ once: true }}
                                >
                                    当前滚动位置: <span className="font-mono" id="scroll-position">0px</span>
                                </motion.div>
                            </div>
                        </motion.section>
                    ))}

                    {/* Additional Content for Scroll Testing */}
                    {additionalContent.map((content, index) => (
                        <motion.section
                            key={`additional-${index}`}
                            className={`py-20 ${content.bgColor}`}
                            initial={{ opacity: 0, y: 30 }}
                            whileInView={{ opacity: 1, y: 0 }}
                            transition={{ duration: 0.5 }}
                            viewport={{ once: true, margin: "-50px" }}
                        >
                            <div className="max-w-4xl mx-auto px-4 text-center">
                                <h3 className="text-2xl font-bold mb-4 text-gray-800">
                                    {content.title}
                                </h3>
                                <p className="text-gray-600 leading-relaxed">
                                    {content.content}
                                </p>
                            </div>
                        </motion.section>
                    ))}

                    {/* Footer */}
                    <footer className="bg-gray-800 text-white py-16">
                        <div className="max-w-4xl mx-auto px-4 text-center">
                            <motion.h3
                                className="text-2xl font-bold mb-4"
                                initial={{ opacity: 0, y: 30 }}
                                whileInView={{ opacity: 1, y: 0 }}
                                transition={{ duration: 0.6 }}
                                viewport={{ once: true }}
                            >
                                页面底部
                            </motion.h3>
                            <motion.p
                                className="text-gray-300"
                                initial={{ opacity: 0, y: 30 }}
                                whileInView={{ opacity: 1, y: 0 }}
                                transition={{ delay: 0.2, duration: 0.6 }}
                                viewport={{ once: true }}
                            >
                                导航栏滚动效果演示完成。使用 Framer Motion + TailwindCSS 构建。
                            </motion.p>
                        </div>
                    </footer>
                </main>
            );
        };

        // 主App组件
        const App = () => {
            return (
                <div className="App">
                    <Navbar />
                    <MainContent />
                </div>
            );
        };

        // 渲染应用
        ReactDOM.render(<App />, document.getElementById('root'));

        // 显示滚动位置
        window.addEventListener('scroll', () => {
            const scrollPosition = document.getElementById('scroll-position');
            if (scrollPosition) {
                scrollPosition.textContent = `${Math.round(window.scrollY)}px`;
            }
        });
    </script>
</body>
</html> 